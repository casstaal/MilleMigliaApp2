generator client {
      provider = "prisma-client-js"
}

datasource db {
      provider  = "postgresql"
      url       = env("DATABASE_URL")
      directUrl = env("DIRECT_URL")
}

model User {
      id            String   @id @default(uuid())
      name          String
      email         String   @unique
      password_hash String
      role          String
      markers       Marker[]
      posts         Post[]
      likes         Like[]
}

model Marker {
      id           String   @id @default(uuid())
      brand        String
      model        String
      description  String
      images       String[]
      latitude     Float
      longitude    Float
      date         DateTime
      userId       String
      user         User     @relation(fields: [userId], references: [id])
}

model Post {
      id           String @id @default(uuid())
      title        String
      link         String
      description  String
      date         DateTime
      userId       String
      user         User     @relation(fields: [userId], references: [id])
      likes        Like[]
}

model Like {
      id         String @id @default(uuid())
      createdAt  DateTime @default(now())
      userId     String
      user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
      postId     String
      post       Post     @relation(fields: [postId], references: [id], onDelete: Cascade)

      @@unique([userId, postId])
}
